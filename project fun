//relay turning on/off with serial monitor

int relayPin = 7;   // Relay control pin

String input = "";  // Stores serial input

void setup() {
  Serial.begin(9600);
  pinMode(relayPin, OUTPUT);
  digitalWrite(relayPin, LOW);  // Relay OFF at start

  Serial.println("Relay control ready.");
  Serial.println("Type 'on' or 'off' and press Enter.");
}

void loop() {
  if (Serial.available()) {
    input = Serial.readStringUntil('\n');  // Read input line
    input.trim(); // Remove spaces/newlines

    if (input.equalsIgnoreCase("on")) {
      digitalWrite(relayPin, HIGH);
      Serial.println("Relay ON");
    }
    else if (input.equalsIgnoreCase("off")) {
      digitalWrite(relayPin, LOW);
      Serial.println("Relay OFF");
    }
    else {
      Serial.println("Unknown command. Type 'on' or 'off'.");
    }
  }
}









//moisture sensor
int sensorPin = A0;  // Analog pin connected to sensor

void setup() {
  Serial.begin(9600);
  Serial.println("Soil moisture sensor ready");
}

void loop() {
  int value = analogRead(sensorPin);

  // Convert value to percentage (optional)
  int percent = map(value, 350, 1023, 100, 0);  
  // Adjust the 350 for your dry reading calibration

  Serial.print("Raw: ");
  Serial.print(value);
  Serial.print("   Moisture: ");
  Serial.print(percent);
  Serial.println("%");

  delay(1000);
}

//Raw values range roughly from:

//~280–400 = very wet

//~500–700 = moist

//~800–1023 = dry

//Every sensor is different → calibrate like this:

//Put the sensor in dry soil, note the value (example: 900)

//Put it in water-saturated soil, note the value (example: 350)

//Replace these numbers:
int percent = map(value, 350, 900, 100, 0);



int sensorPin = A0;
int smoothValue = 0;

void setup() {
  Serial.begin(9600);
}

void loop() {
  smoothValue = (smoothValue * 0.9) + (analogRead(sensorPin) * 0.1);

  Serial.print("Smoothed: ");
  Serial.println(smoothValue);

  delay(500);
}


//screen tester

#include <Adafruit_GFX.h>
#include <Adafruit_SSD1306.h>
#include <Wire.h>

#define SCREEN_WIDTH 128
#define SCREEN_HEIGHT 64

Adafruit_SSD1306 display(SCREEN_WIDTH, SCREEN_HEIGHT, &Wire, -1);

void setup() {
  Serial.begin(115200);
  Serial.println("SSD1306 OLED Test");

  if (!display.begin(SSD1306_SWITCHCAPVCC, 0x3C)) {
    Serial.println("OLED not found");
    for (;;);
  }

  display.clearDisplay();
  display.display();

  delay(1000);

  testPixelFill();
  testLines();
  testFastLines();
  testRects();
  testFilledRects();
  testCircles();
  testFilledCircles();
  testText();
  testScroll();
}

void loop() {}

void testPixelFill() {
  display.clearDisplay();
  for (int16_t i = 0; i < display.width(); i++) {
    for (int16_t j = 0; j < display.height(); j++) {
      display.drawPixel(i, j, SSD1306_WHITE);
    }
  }
  display.display();
  delay(1000);
}

void testLines() {
  display.clearDisplay();
  for (int16_t i = 0; i < display.width(); i+=4) {
    display.drawLine(0, 0, i, display.height()-1, SSD1306_WHITE);
    display.display();
  }
  delay(1000);
}

void testFastLines() {
  display.clearDisplay();
  for (int16_t j = 0; j < display.height(); j+=4) {
    display.drawFastHLine(0, j, display.width(), SSD1306_WHITE);
    display.display();
  }
  delay(1000);
}

void testRects() {
  display.clearDisplay();
  for (int16_t i = 0; i < display.height(); i += 4) {
    display.drawRect(i, i, display.width() - i*2, display.height() - i*2, SSD1306_WHITE);
    display.display();
  }
  delay(1000);
}

void testFilledRects() {
  display.clearDisplay();
  for (int16_t i = 0; i < display.height(); i += 4) {
    display.fillRect(i, i, display.width() - i*2, display.height() - i*2, SSD1306_WHITE);
    display.display();
  }
  delay(1000);
}

void testCircles() {
  display.clearDisplay();
  for (int16_t i = 0; i < display.height(); i += 4) {
    display.drawCircle(display.width()/2, display.height()/2, i, SSD1306_WHITE);
    display.display();
  }
  delay(1000);
}

void testFilledCircles() {
  display.clearDisplay();
  for (int16_t i = 0; i < display.height(); i += 4) {
    display.fillCircle(display.width()/2, display.height()/2, i, SSD1306_WHITE);
    display.display();
  }
  delay(1000);
}

void testText() {
  display.clearDisplay();
  display.setTextSize(1);
  display.setTextColor(SSD1306_WHITE);
  display.setCursor(0,0);
  display.println("OLED TEXT TEST");
  display.println("ABCDEFGHIJKLMNOP");
  display.println("1234567890");
  display.println("!@#$%^&*()");
  display.display();
  delay(2000);
}

void testScroll() {
  display.startscrollright(0x00, 0x0F);
  delay(2000);
  display.stopscroll();
  display.startscrollleft(0x00, 0x0F);
  delay(2000);
  display.stopscroll();
}



